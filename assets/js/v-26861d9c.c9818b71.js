(self.webpackChunkscriptcat_org=self.webpackChunkscriptcat_org||[]).push([[208],{8133:(n,s,a)=>{"use strict";a.r(s),a.d(s,{data:()=>p});const p={key:"v-26861d9c",path:"/dev/api.html",title:"API 文档",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:3,title:"说明",slug:"说明",children:[]},{level:3,title:"定义",slug:"定义",children:[]}],filePathRelative:"dev/api.md",git:{updatedTime:1622043305e3,contributors:[]}}},2943:(n,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>f});var p=a(6252);const e=(0,p.Wm)("h1",{id:"api-文档"},[(0,p.Wm)("a",{class:"header-anchor",href:"#api-文档"},"#"),(0,p.Uk)(" API 文档")],-1),t=(0,p.Wm)("h3",{id:"说明"},[(0,p.Wm)("a",{class:"header-anchor",href:"#说明"},"#"),(0,p.Uk)(" 说明")],-1),o=(0,p.Uk)("本扩展api定义参考"),l={href:"https://www.tampermonkey.net/documentation.php",target:"_blank",rel:"noopener noreferrer"},c=(0,p.Uk)("tampermonkey文档"),r=(0,p.Uk)(",由于时间和精力问题,只实现了部分API,后续将继续迭代,本扩展进行扩充或者与原GM不同的API将在文档中特殊标注.对于某些API还提供了同步函数,同步函数规则:GM.*,具体请看文档内容."),i=(0,p.Uk)("API的详细定义,请看"),u=(0,p.Wm)("code",null,"tempermonkey.d.ts",-1),k=(0,p.Uk)("或者内置编辑器提示,文档更新可能不会及时.对于本扩展特有的API请看"),b=(0,p.Uk)("CatApi文档"),d=(0,p.uE)('<h3 id="定义"><a class="header-anchor" href="#定义">#</a> 定义</h3><h4 id="gm-cookie"><a class="header-anchor" href="#gm-cookie">#</a> GM_cookie *</h4><blockquote><p>部分功能缺失,本扩展特供,操作cookie,只能在后台脚本中使用</p></blockquote><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">GM_cookie</span><span class="token punctuation">(</span>action<span class="token operator">:</span> GM_Types<span class="token punctuation">.</span>CookieAction<span class="token punctuation">,</span> details<span class="token operator">:</span> GM_Types<span class="token punctuation">.</span>CookieDetails<span class="token punctuation">,</span> <span class="token function-variable function">ondone</span><span class="token operator">:</span> <span class="token punctuation">(</span>cookie<span class="token operator">:</span> GM_Types<span class="token punctuation">.</span>Cookie<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token builtin">any</span><span class="token punctuation">,</span> error<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>\n\n<span class="token keyword">declare</span> <span class="token keyword">namespace</span> GM_Types <span class="token punctuation">{</span>\n    <span class="token keyword">type</span> <span class="token class-name">CookieAction</span> <span class="token operator">=</span> <span class="token string">&quot;list&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;delete&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;set&quot;</span><span class="token punctuation">;</span>\n    <span class="token keyword">interface</span> <span class="token class-name">CookieDetails</span> <span class="token punctuation">{</span>\n        url<span class="token operator">:</span> <span class="token builtin">string</span>\n        name<span class="token operator">:</span> <span class="token builtin">string</span>\n        value<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>\n        domain<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>\n        path<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>\n        secure<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>\n        httpOnly<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>\n        expirationDate<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>\n    <span class="token punctuation">}</span>\n    <span class="token keyword">interface</span> <span class="token class-name">Cookie</span> <span class="token punctuation">{</span>\n        domain<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>\n        name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>\n        storeId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>\n        value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>\n        session<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>\n        hostOnly<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>\n        expirationDate<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>\n        path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>\n        httpOnly<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>\n        secure<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h4 id="gm-notification"><a class="header-anchor" href="#gm-notification">#</a> GM_notification *</h4>',5),m=(0,p.Wm)("p",null,[(0,p.Uk)("发送消息通知,提供了"),(0,p.Wm)("code",null,"progress"),(0,p.Uk)("和"),(0,p.Wm)("code",null,"buttons"),(0,p.Uk)("的能力,可以显示进度条类型和按钮类型的通知,多提供了"),(0,p.Wm)("code",null,"GM_closeNotification"),(0,p.Uk)(","),(0,p.Wm)("code",null,"GM_updateNotification"),(0,p.Uk)("两个方法.")],-1),g={href:"https://bbs.tampermonkey.net.cn/thread-403-1-1.html",target:"_blank",rel:"noopener noreferrer"},y=(0,p.Uk)("demo"),h=(0,p.uE)('<div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">GM_notification</span><span class="token punctuation">(</span>details<span class="token operator">:</span> GM_Types<span class="token punctuation">.</span>NotificationDetails<span class="token punctuation">,</span> ondone<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>\n<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">GM_notification</span><span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> image<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> onclick<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>\n<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">GM_closeNotification</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>\n<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">GM_updateNotification</span><span class="token punctuation">(</span>id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> details<span class="token operator">:</span> GM_Types<span class="token punctuation">.</span>NotificationDetails<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>\n\n<span class="token keyword">declare</span> <span class="token keyword">namespace</span> GM_Types <span class="token punctuation">{</span>\n\n    <span class="token keyword">type</span> <span class="token class-name">NotificationOnClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> NotificationThis<span class="token punctuation">,</span> id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> index<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span><span class="token punctuation">;</span>\n    <span class="token keyword">type</span> <span class="token class-name">NotificationOnDone</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> NotificationThis<span class="token punctuation">,</span> clicked<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">interface</span> <span class="token class-name">NotificationButton</span> <span class="token punctuation">{</span>\n        title<span class="token operator">:</span> <span class="token builtin">string</span>\n        iconUrl<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">interface</span> <span class="token class-name">NotificationDetails</span> <span class="token punctuation">{</span>\n        text<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>\n        title<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>\n        image<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span>\n        highlight<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>\n        silent<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>\n        timeout<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>\n        onclick<span class="token operator">?</span><span class="token operator">:</span> NotificationOnClick\n        ondone<span class="token operator">?</span><span class="token operator">:</span> NotificationOnDone\n        progress<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span>\n        oncreate<span class="token operator">?</span><span class="token operator">:</span> NotificationOnClick\n        <span class="token comment">// 只能存在2个</span>\n        buttons<span class="token operator">?</span><span class="token operator">:</span> NotificationButton<span class="token punctuation">[</span><span class="token punctuation">]</span>\n    <span class="token punctuation">}</span>\n\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h4 id="gm-xmlhttprequest"><a class="header-anchor" href="#gm-xmlhttprequest">#</a> GM_xmlhttpRequest</h4><blockquote><p>部分功能缺失,cookie功能firefox暂不支持</p></blockquote><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">GM_xmlhttpRequest</span><span class="token punctuation">(</span>details<span class="token operator">:</span> GM_Types<span class="token punctuation">.</span>XHRDetails<span class="token punctuation">)</span><span class="token operator">:</span> GM_Types<span class="token punctuation">.</span>AbortHandle<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>\n\n<span class="token keyword">declare</span> <span class="token keyword">namespace</span> GM_Types <span class="token punctuation">{</span>\n    <span class="token keyword">interface</span> <span class="token class-name">XHRResponse</span> <span class="token punctuation">{</span>\n        finalUrl<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>\n        readyState<span class="token operator">?</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token operator">|</span> <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">4</span><span class="token punctuation">,</span>\n        responseHeaders<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>\n        status<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>\n        statusText<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>\n        response<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span>\n        responseText<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>\n        responseXML<span class="token operator">?</span><span class="token operator">:</span> Document <span class="token operator">|</span> <span class="token keyword">null</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">interface</span> <span class="token class-name">XHRProgress</span> <span class="token keyword">extends</span> <span class="token class-name">XHRResponse</span> <span class="token punctuation">{</span>\n        done<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>\n        lengthComputable<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>\n        loaded<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>\n        position<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>\n        total<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>\n        totalSize<span class="token operator">:</span> <span class="token builtin">number</span>\n    <span class="token punctuation">}</span>\n\n    <span class="token keyword">type</span> <span class="token class-name">Listener<span class="token operator">&lt;</span><span class="token constant">OBJ</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token operator">:</span> <span class="token constant">OBJ</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">any</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">interface</span> <span class="token class-name">XHRDetails</span> <span class="token punctuation">{</span>\n        method<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">&quot;GET&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;HEAD&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>\n        url<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>\n        headers<span class="token operator">?</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token keyword">readonly</span> <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>\n        data<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>\n        binary<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>\n        timeout<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>\n        context<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">CONTEXT_TYPE</span><span class="token punctuation">,</span>\n        responseType<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">&quot;arraybuffer&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;blob&quot;</span> <span class="token operator">|</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">,</span>\n        overrideMimeType<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>\n        anonymous<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>\n        fetch<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>\n        username<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>\n        password<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>\n\n        onload<span class="token operator">?</span><span class="token operator">:</span> Listener<span class="token operator">&lt;</span>XHRResponse<span class="token operator">&gt;</span><span class="token punctuation">,</span>\n        onloadstart<span class="token operator">?</span><span class="token operator">:</span> Listener<span class="token operator">&lt;</span>XHRResponse<span class="token operator">&gt;</span><span class="token punctuation">,</span>\n        onloadend<span class="token operator">?</span><span class="token operator">:</span> Listener<span class="token operator">&lt;</span>XHRResponse<span class="token operator">&gt;</span><span class="token punctuation">,</span>\n        onprogress<span class="token operator">?</span><span class="token operator">:</span> Listener<span class="token operator">&lt;</span>XHRProgress<span class="token operator">&gt;</span><span class="token punctuation">,</span>\n        onreadystatechange<span class="token operator">?</span><span class="token operator">:</span> Listener<span class="token operator">&lt;</span>XHRResponse<span class="token operator">&gt;</span><span class="token punctuation">,</span>\n        ontimeout<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">,</span>\n        onabort<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">,</span>\n        onerror<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">Function</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><h4 id="gm-fetch"><a class="header-anchor" href="#gm-fetch">#</a> GM.fetch</h4><blockquote><p>功能缺失</p></blockquote><h4 id="gm-log"><a class="header-anchor" href="#gm-log">#</a> GM_log *</h4><blockquote><p>日志函数,日志将在控制面板的运行日志中看到.相比于tm增加了一个日志的level</p></blockquote><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">GM_log</span><span class="token punctuation">(</span>message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> level<span class="token operator">?</span><span class="token operator">:</span> GM_Types<span class="token punctuation">.</span><span class="token constant">LOGGER_LEVEL</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>\n<span class="token keyword">declare</span> <span class="token keyword">namespace</span> GM_Types <span class="token punctuation">{</span>\n    <span class="token keyword">type</span> <span class="token class-name"><span class="token constant">LOGGER_LEVEL</span></span> <span class="token operator">=</span> <span class="token string">&#39;debug&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;info&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;warn&#39;</span> <span class="token operator">|</span> <span class="token string">&#39;error&#39;</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="gm-get-set-deletevalue"><a class="header-anchor" href="#gm-get-set-deletevalue">#</a> GM_get/set/deleteValue</h4><blockquote><p>从储存中获取或者设置值,数据在同一<code>namespace</code>中可以共享,且可以实时的同步.同一<code>namespace</code>中共享是一个实验性的功能🧪.</p></blockquote><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">GM_setValue</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>\n\n<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">GM_getValue</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> defaultValue<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>\n\n<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">GM_deleteValue</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="gm-add-removevaluechangelistener"><a class="header-anchor" href="#gm-add-removevaluechangelistener">#</a> GM_add/removeValueChangeListener</h4><blockquote><p>对值的监听操作,add会返回一个监听id,使用remove可以取消监听</p></blockquote><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">GM_addValueChangeListener</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> listener<span class="token operator">:</span> GM_Types<span class="token punctuation">.</span>ValueChangeListener<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>\n\n<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">GM_removeValueChangeListener</span><span class="token punctuation">(</span>listenerId<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="gm-openintab"><a class="header-anchor" href="#gm-openintab">#</a> GM_openInTab</h4><blockquote><p>打开一个新窗口</p></blockquote><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">GM_openInTab</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> options<span class="token operator">:</span> GM_Types<span class="token punctuation">.</span>OpenTabOptions<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>\n<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">GM_openInTab</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> loadInBackground<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>\n<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">GM_openInTab</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span>\n\n<span class="token keyword">declare</span> <span class="token keyword">namespace</span> GM_Types <span class="token punctuation">{</span>\n    <span class="token keyword">interface</span> <span class="token class-name">OpenTabOptions</span> <span class="token punctuation">{</span>\n        active<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>\n        insert<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span>\n        setParent<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="gm-setclipboard"><a class="header-anchor" href="#gm-setclipboard">#</a> GM_setClipboard</h4><blockquote><p>设置剪辑板</p></blockquote><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">GM_setClipboard</span><span class="token punctuation">(</span>data<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> info<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token punctuation">{</span> <span class="token keyword">type</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> minetype<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="gm-addstyle"><a class="header-anchor" href="#gm-addstyle">#</a> GM_addStyle</h4><blockquote><p>添加样式到页面中,返回样式DOM</p></blockquote><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">GM_addStyle</span><span class="token punctuation">(</span>css<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> HTMLElement<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>',24),f={render:function(n,s){const a=(0,p.up)("OutboundLink"),f=(0,p.up)("RouterLink");return(0,p.wg)(),(0,p.j4)(p.HY,null,[e,t,(0,p.Wm)("p",null,[o,(0,p.Wm)("a",l,[c,(0,p.Wm)(a)]),r]),(0,p.Wm)("p",null,[i,u,k,(0,p.Wm)(f,{to:"/dev/cat-api.html"},{default:(0,p.w5)((()=>[b])),_:1})]),d,(0,p.Wm)("blockquote",null,[m,(0,p.Wm)("p",null,[(0,p.Wm)("a",g,[y,(0,p.Wm)(a)])])]),h],64)}}}}]);